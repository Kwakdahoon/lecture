<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="/miniProject/js/util.js"></script>
    <link rel="stylesheet" href="/miniProject/css/styles.css">

    <title>Document</title>
    <script>
        $(function () {
            getTourData();
        })


        // function noiamge () {
        //   $("img"),error(function(){
        //     $(this).attr("src", "/image/noImage.png")
        //   });

          
        // };

        function getTourData() {
            const myKey = "zn%2BzZZug02R%2FeRrWaeYGi7zd%2BTlXJK9wF2G%2Bk0QBVm3mSrjMOvEc3L45lh8wzKpXAW1AZmv3j6gJ%2BCjp91p2Jg%3D%3D"
            let baseUrl = `https://apis.data.go.kr/B551011/KorService1/areaBasedList1?MobileOS=ETC&MobileApp=AppTest&serviceKey=${myKey}`;
            
            let url = baseUrl + "&areaCode=" + "&_type=json"; // 서울지역(areaCode=1), 제이슨으로
            
            console.log("baseUrl : ", baseUrl,"url :", url)
            // 다음 페이지로
            // url += "&pageNo=" + pageNo + "&numOfRows=" + numOfRows;
            // console.log(url);
            
            // $(".loading").show();
            $.ajax({
                url: url, // 데이터가 송수신 될 서버의 주소
                type: "GET", // 통신 방식 (GET, POST, PUT, DELETE)
                dataType: "json", // 수신받을 데이터 타입 (MIME TYPE)
                success: function (data) { // () 안에 있는 변수로 받아온다 (꼭 data 일 필요 없음)
                    // 통신이 성공하면 수행할 함수
                    console.log(data);
                    parsingJSON(data);
                },
                error : function () {
                },
                complete: function () {
                //   $(".loading").hide();
                }
            })
        }

        function parsingJSON (json) {
            output = "";
            let festivalArr = json.response.body.items.item;
            console.log(festivalArr)
            $.each(festivalArr, function(i,e) {
                console.log(e)
                output += `<ul><img style ="width : 50px" src ="${e.firstimage}"/></ul>`
            })
            $("#test").html(output)
        }
    </script>
</head>
<body>
    
</body>
</html>