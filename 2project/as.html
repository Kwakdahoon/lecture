<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>관광지 지도 표시</title>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d259b1ebbfde4e313e6456681d90f3ba"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div id="map" style="width:100%;height:350px;"></div>
    <div id="places"></div>

    <script>
        // JSON 데이터 파싱 함수
        function parsingJSON(json) {
            let festivalArr = json.response.body.items.item;
            let placesDiv = document.getElementById('places');

            // 관광지 리스트 출력
            $.each(festivalArr, function(i, e) {
                let placeDiv = document.createElement('div');
                placeDiv.innerHTML = e.title; // 관광지 이름을 출력
                placeDiv.style.cursor = 'pointer';

                // 클릭 이벤트 추가
                placeDiv.onclick = (function(lat, lng) {
                    return function() {
                        displayMap(lat, lng);
                    };
                })(e.mapy, e.mapx);

                placesDiv.appendChild(placeDiv);
            });
        }

        // 지도 생성 및 마커 표시 함수
        function displayMap(latitude, longitude) {
            var mapContainer = document.getElementById('map');
            var mapOption = { 
                center: new kakao.maps.LatLng(latitude, longitude),
                level: 3 
            };
            
            var map = new kakao.maps.Map(mapContainer, mapOption);
            
            var markerPosition = new kakao.maps.LatLng(latitude, longitude); 
            var marker = new kakao.maps.Marker({
                position: markerPosition
            });

            marker.setMap(map);
        }

        // 예제 JSON 데이터 (실제 데이터로 교체해야 합니다)
        var exampleJSON = {
            "response": {
                "body": {
                    "items": {
                        "item": [
                            {"title": "관광지1", "mapx": 126.9786567, "mapy": 37.566826},
                            {"title": "관광지2", "mapx": 127.028600, "mapy": 37.497942}
                        ]
                    }
                }
            }
        };

        // JSON 데이터 파싱
        parsingJSON(exampleJSON);
    </script>
</body>
</html>
