<!DOCTYPE html>
<html data-wf-domain="newport-template.webflow.io" data-wf-page="5e4b16080b25ed0d294d526a"
  data-wf-site="5e4b16080b25ed2b324d526e" data-wf-status="1">
<script src="map.js"></script>

<head>
  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- kakao -->
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d259b1ebbfde4e313e6456681d90f3ba"></script>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5e4b16080b25ed2b324d526e"
    type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
    </script>
  <script src="https://assets.website-files.com/5e4b16080b25ed2b324d526e/js/webflow.cff8c8c61.js"
    type="text/javascript"></script>
  <link href="https://assets.website-files.com/5e4b16080b25ed2b324d526e/css/newport-template.webflow.00281f806.css"
    rel="stylesheet" type="text/css" />
  <script src="https://kit.fontawesome.com/aebc8a6fa8.js" crossorigin="anonymous"></script>
  <meta charset="utf-8" />
  <title>Festival Detail</title>
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="Webflow" name="generator" />
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">
    WebFont.load({
      google: {
        families: [
          "Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic",
          "Roboto:300,regular,500",
        ],
      },
    });</script>
  <script type="text/javascript">
    !(function (o, c) {
      var n = c.documentElement,
        t = " w-mod-";
      (n.className += t + "js"),
        ("ontouchstart" in o ||
          (o.DocumentTouch && c instanceof DocumentTouch)) &&
        (n.className += t + "touch");
    })(window, document);

    $(document).ready(function () {
      if (matchMedia("screen and (min-width:990px)").matches) {
        document
          .getElementById("listbtn")
          .addEventListener("click", function () {
            let tabContent = document.getElementById("nav2");
            tabContent.classList.toggle("active");
          });
      }
    });
  </script>





  <script>
    const myKey = "zn%2BzZZug02R%2FeRrWaeYGi7zd%2BTlXJK9wF2G%2Bk0QBVm3mSrjMOvEc3L45lh8wzKpXAW1AZmv3j6gJ%2BCjp91p2Jg%3D%3D"
    let params = new URL(document.location).searchParams;
    let contentId = params.get("contentid");
    let listNo = 1;
    let now = new Date();
    // 1. 화면을로딩한다.
    // 2. 로딩을 하기전, 하트를 로딩할 때 쿠키를 비교해서 현재 contentid에 관련된 쿠키가 있을 경우.
    // 3. 꽉찬 하트를 로딩하고 없으면 빈 하트를 로딩한다.
    // 4. 하트를 클릭 했을 때.
    // 4-1 모달창에 '찜성공' 을 띄운다
    // 5. 현재 contentid의 쿠키가 존재하는지 비교하고
    // 6. 쿠키가 있으면 해당 contentid의 쿠키를 제거하고 없으면 contentid를 name으로 지정한 쿠키를 생성한다.


    // let date = new Date();
    // date.setDate(date.getDate() + 7);
    // let setCookie = "";
    // setCookie += `${contentId}=cookie;`;
    // setCookie += "Expires=" + date.toUTCString();
    // document.cookie = setCookie;

    // function deleteCookie() {
    //   let date = new Date();
    //   date.setDate(date.getDate() - 1);
    //   let setCookie = "";
    //   setCookie += `${contentId}=cookie;`;
    //   setCookie += "Expires=" + date.toUTCString();
    //   document.cookie = setCookie;
    // }

    // 
    function createCookie() {
      let isCookieValid = getCookie(contentId);
      console.log(isCookieValid)
      if (isCookieValid == true) {
        document.cookie = contentId + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT';
      } else {
        document.cookie = `${contentId}=key`;
      }
    }
    function checkCookie() {
      let isCookieValid = getCookie(contentId);
      console.log($("#chkbox"));
      if (isCookieValid == true)
        $('input[id=chkbox]').prop('checked', true);
    }
    function getCookie(contentId) { // 얘는 boolean을 뱉는다
      let cId = contentId + '=';
      var cookieData = document.cookie;
      var start = cookieData.indexOf(cId);
      var cValue = '';
      if (start != -1) {
        return true
      } else {
        return false
      }
    }

    // function deleteCookie() {
    //   let noChkBox = 
    // }


    $(function () {
      getTourData();
      getDescription();
      getImg();

    })


    function noiamge() {
      $("img"), error(function () {
        $(this).attr("src", "/image/noImage.png")
      });
    };


    function getImg(json) {
      let baseUrl = `https://apis.data.go.kr/B551011/KorService1/detailImage1?MobileOS=etc&MobileApp=mobileapp&contentId=${contentId}&imageYN=Y&subImageYN=Y&serviceKey=${myKey}`

      let url = baseUrl + "&_type=json";
      // console.log(baseUrl);
      $(".loading").show();
      $.ajax({
        url: url, // 데이터가 송수신 될 서버의 주소
        type: "GET", // 통신 방식 (GET, POST, PUT, DELETE)
        dataType: "json", // 수신받을 데이터 타입 (MIME TYPE)
        success: function (data) { // () 안에 있는 변수로 받아온다 (꼭 data 일 필요 없음)
          // 통신이 성공하면 수행할1357 함수
          // console.log(data);
          parsingJSON(data);
        },
        error: function () {
        },
        complete: function () {
          $(".loading").hide();
        }
      })
      function parsingJSON(json) {
        let img = json.response.body.items.item;
        output = "";

        $.each(img, function (i, e) {
          output += `
                  <div class="carousel-item ${i == 0 ? "active" : " "}">
                    <img src="${e.originimgurl}" class="d-block w-100">
                  </div>`;
        })


        $(".carousel-inner").html(output);

      }
    }

    function getDescription() {

      let baseUrl = `https://apis.data.go.kr/B551011/KorService1/detailIntro1?MobileOS=etc&MobileApp=mobileapp&contentId=${contentId}&contentTypeId=15&serviceKey=${myKey}`

      let url = baseUrl + "&_type=json";
      // console.log(baseUrl);
      $(".loading").show();
      $.ajax({
        url: url, // 데이터가 송수신 될 서버의 주소
        type: "GET", // 통신 방식 (GET, POST, PUT, DELETE)
        dataType: "json", // 수신받을 데이터 타입 (MIME TYPE)
        success: function (data) { // () 안에 있는 변수로 받아온다 (꼭 data 일 필요 없음)
          // 통신이 성공하면 수행할1357 함수
          // console.log(data);
          parsingJSON(data);
        },
        error: function () {
        },
        complete: function () {
          $(".loading").hide();
        }
      })

      function parsingJSON(json) {
        let startDate = json.response.body.items.item[0].eventstartdate;
        let endDate = json.response.body.items.item[0].eventenddate;
        let playTime = json.response.body.items.item[0].playtime;
        let place = json.response.body.items.item[0].eventplace;
        output = `
      <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">시작일 : ${startDate}</th>
            <th scope="col">끝나는날 : ${endDate}</th>
            <th scope="col">개장시간 : ${playTime}</th>
            <th scope="col">장소 : ${place}</th>
            <th  onclick="createCookie()"><input id="chkbox" type="checkbox">찜</th>
          </tr>
        </thead>
        </table>`;
        $("#dc").html(output);
        checkCookie();

      }
    }

    function getTourData() {
      let baseUrl = `https://apis.data.go.kr/B551011/KorService1/detailCommon1?MobileOS=etc&MobileApp=test&contentId=${contentId}&mapinfoYN=Y&defaultYN=Y&overviewYN=Y&serviceKey=${myKey}`;

      let url = baseUrl + "&_type=json";
      // console.log(baseUrl);
      $(".loading").show();
      $.ajax({
        url: url, // 데이터가 송수신 될 서버의 주소
        type: "GET", // 통신 방식 (GET, POST, PUT, DELETE)
        dataType: "json", // 수신받을 데이터 타입 (MIME TYPE)
        success: function (data) { // () 안에 있는 변수로 받아온다 (꼭 data 일 필요 없음)
          // 통신이 성공하면 수행할1357 함수
          // console.log(data);
          parsingJSON(data);
        },
        error: function () {
        },
        complete: function () {
          $(".loading").hide();
        }
      })
    }
    function parsingJSON(json) {
      output = "";
      //description
      let mapx = json.response.body.items.item[0].mapx;
      let mapy = json.response.body.items.item[0].mapy;
      let description = json.response.body.items.item[0].overview;
      let homepage = json.response.body.items.item[0].homepage;
      let tel = json.response.body.items.item[0].tel;
      let title = json.response.body.items.item[0].title;
      let mI = json.rep;
      console.log(mapx, mapy)
      map(mapx, mapy);
      output = `
          <blockquote class="blockquote text-center">
            <p class="mb-0"><b>${description}</b></p>
            <div>${tel}</div>
            <div>${title}</div>
            <div>${homepage}</div>
            </blockquote>`
      $("#description").html(output);
    }


  </script>
  <style>
    * {
      font-family: "Roboto:300,regular,500";
    }

    #listling {
      display: none;
      list-style: none;
    }

    #nav2 {
      visibility: hidden;
      padding-top: 5%;
    }

    #nav2.active {
      visibility: visible;
    }

    .nav {
      width: 100%;
      text-align: right;
    }

    .homebtn {
      padding-bottom: 5%;
      margin-top: 0;
    }

    #seoul {
      background-repeat: no-repeat;
      background-image: url("images/seoulcolored.png");
    }

    #seoul:hover {
      background: none;
    }

    #details {
      padding-left: 1px;
    }

    #img,
    #dc {
      text-align: center;
    }

    .w-container h2 {
      text-align: center;
      margin-top: 30px;
    }

    /* -------------------------------------- */

    @media only screen and (max-width: 990px) {
      #nav2 {
        display: none;
      }
    }

    @media only screen and (max-width: 990px) {
      #listling {
        display: block;
      }
    }
  </style>
</head>

<body>
  <div class="w-container">
    <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease"
      role="banner" class="navigation-bar w-nav">
      <!-- ---------홈이미지 버튼---------------------------------- -->
      <div class="w-container">
        <div class="homebtn">
          <a href="thisisIndex.html" aria-current="page"><img id="seoul" src="images/seoul.png" alt="Home" />
          </a>
        </div>

        <!-- --------------배너----------------------------------- -->
        <a href="thisisIndex.html" aria-current="page" class="brand-link w-nav-brand w--current">
          <h1 class="brand-text">축제 공연 행사</h1>
        </a>
      </div>
      <!-- -----Nav Button Section----------------------------------- -->
      <nav role="navigation" class="navigation-menu w-nav-menu nav" id="nav1">
        <a href="thisisIndex.html" aria-current="page" class="navigation-link w-nav-link">Home</a><a href="#"
          class="navigation-link w-nav-link" id="listbtn">List</a>
        <ul id="listling">
          <li><a href="#" class="navigation-link w-nav-link">관광지</a></li>
          <li><a href="#" class="navigation-link w-nav-link">문화시설</a></li>
          <li>
            <a href="#" class="navigation-link w-nav-link">축제·공연·행사</a>
          </li>
          <li><a href="#" class="navigation-link w-nav-link">여행코스</a></li>
          <li><a href="#" class="navigation-link w-nav-link">레포츠</a></li>
          <li><a href="#" class="navigation-link w-nav-link">숙박</a></li>
          <li><a href="#" class="navigation-link w-nav-link">쇼핑</a></li>
          <li><a href="#" class="navigation-link w-nav-link">음식점</a></li>
          <li><a href="#" class="navigation-link w-nav-link">교통</a></li>
        </ul>

        <a class="navigation-link w-nav-link" id="details" disabled>> &nbsp; Details</a>
      </nav>
      <div class="hamburger-button w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>

      <!-- ------List 버튼 하위 카테고리 버튼 ---------------------------- -->
      <nav id="nav2" class="nav">
        <a href="#" class="navigation-link w-nav-link">관광지</a>
        <a href="#" class="navigation-link w-nav-link">문화시설</a>
        <a href="#" class="navigation-link w-nav-link">축제·공연·행사</a>
        <a href="#" class="navigation-link w-nav-link">여행코스</a>
        <a href="#" class="navigation-link w-nav-link">레포츠</a>
        <a href="#" class="navigation-link w-nav-link">숙박</a>
        <a href="#" class="navigation-link w-nav-link">쇼핑</a>
        <a href="#" class="navigation-link w-nav-link">음식점</a>
        <a href="#" class="navigation-link w-nav-link">교통</a>

        <div></div>
      </nav>
    </div>
  </div>
  <!-- -----------본문입니다----------------------------- -->
  <div class="section">
    <div class="w-container">
      <!-- 이미지슬라이더 -->

      <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner"></div>
      </div>

      <!-- 간단 설명 -->
      <div id="description"></div>
      <!-- 날짜 장소 등 -->
      <div id="dc"></div>
      <h2>위치</h2>
      <!-- map -->
      <div id="map" style="width:100%;height:350px;"></div>

    </div>
  </div>
  <!-- --------footer입니다--------------------------------- -->
  <div class="footer" id="footer">
    <div class="footer-text">
      <h2>About us</h2>
      <h3>2조</h3>
      장영우, 김다손, 다훈, 송인서, 윤제현, 이연화, 최범준, 최혜지, 창현
    </div>
  </div>

</body>

</html>